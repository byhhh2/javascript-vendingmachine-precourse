# 🚀 프리코스 회고, 근데 이제 3주차 미션을 곁들인..

<br>

## 학습 방법

- 모르는 부분은 구글링을 통해 배웠습니다.
- 코드 컨벤션을 무작정 따르기보단 `왜` 이렇게 해야하는지 고민하며 코딩하였습니다.
- 오픈 카톡방의 카톡을 정독하며 다른 사람들의 고민과 제 고민을 겹쳐 생각해보기도 하고, 헷갈리는 부분이 있다면 적극적으로 질문을 하였습니다.
- 다른 사람의 코드에 좋은 방식이 있다면 그 사람이 어떤 의도로 이렇게 코딩했는지, 이 방식을 제 코드에 적용하면 더 나은 코드가 될지 생각해보았습니다.
- 미리 주어진 테스트 파일과 별개로 테스트 케이스를 작성하여 직접 테스트를 진행하면서 코딩하였습니다.
- 코딩할 때 `왜` 이런 방식으로 했는지 생각하며 코딩하였습니다.

<br>
<br>

## 이번 미션을 통해 배운점

### 1. 비지니스 로직과 UI로직의 분리

비지니스 로직과 UI로직이 분리되어 있지 않다면 유지보수에 어려움이 있다는 것을 몸소 느끼고 깨닫게 되었습니다. 비지니스 로직과 UI로직을 분리시키기 위해 디자인 패턴을 사용한다는 것을 알았고, 그 중 MVC 패턴에 대해 배웠습니다. 구글링을 통해 MVC 패턴에 대해 대략적으로 이해하고, 제 코드에 어떤 방식으로 적용해야 좋은 코드가 완성이 될지 고민해보았습니다.

<img width="900" alt="MVC 패턴" src="https://user-images.githubusercontent.com/52737532/145859379-27ad1518-bd4a-4588-a990-f18358c15ee9.png">

[출처](https://developer.mozilla.org/ko/docs/Glossary/MVC)

1. Controller

   - 사용자가 조작한다.
   - 사용자의 입력을 가져온다.
   - 이벤트를 처리한다.
   - Model과 View를 조작한다.

2. Model

   - 데이터를 가지고 있다.
   - 데이터 구조를 정의한다.

3. View

   - 사용자에게 보여주는 부분을 정의한다.
   - 표시할 데이터를 Model로 부터 받는다.

<br>

제가 참고한 MVC 패턴입니다. 이를 참고하여 제 코드에 적용해보았고,

<img width="1145" alt="상품 추가로직" src="https://user-images.githubusercontent.com/52737532/145862985-713c6d7b-3030-473d-82a1-304ca2699e20.png">

위와 같은 로직이 만들어지게 되었습니다.  
저는 자판기를 하나의 객체로 생각하여 `VendingMachine` 클래스를 만들었고 클래스 내부 메서드로 상품 추가, 잔돈 충전, 상품 구매 등을 구현하였습니다. 해당 로직은 이 중 상품 추가에 대한 코드입니다.

1. 사용자가 자판기에 새로운 상품을 추가하면 Controller인 `addProduct()` 함수가 실행됩니다.
2. Controller에서 사용자의 상품에 대한 입력을 가져옵니다.
3. Controller에서 새로운 상품 객체를 만듭니다.
4. Controller에서 만들어진 상품 객체를 추가하여 Model를 업데이트하도록 `updateProductModel()` 함수를 실행하여 Model을 조종합니다.
5. Model이 업데이트 된 후 업데이트 된 데이터를 가져와 `updateProductView()` 함수를 실행하여 View를 조정합니다.

이와 같이 로직을 분리함으로써 점점 복잡해지는 코드를 쉽게 이해할 수 있었고, 기능을 추가하거나 리팩토링 할 때 수정해야하는 부분을 쉽게 파악할 수 있어서 유지보수에 용이함을 느꼈습니다.

<br>
<br>

### 2. `createElement()`와 문자열 템플릿

이번 미션에서는 '스크립트 추가 외에 주어진 html파일을 수정할 수 없다.'라는 제약조건이 존재했습니다. 미션이 주어지고 어떤 의도로 이런 제약조건이 생겨나게 되었는지 고민해보았습니다. 고민 후에

1. 웹 페이지에 들어가는 컨텐츠가 방대해지고, 동적이게 되면서 하나의 큰 html 파일을 한번에 로드하는 데에는 무리가 있다.
2. html을 작성하는 것은 미션의 주제에 벗어난다.

라는 결론을 얻게 되었습니다.  
결국 자바스크립트로 dom element들을 만들어야 했는데, `createElement()`로 element를 생성하는 방식과 문자열 템플릿으로 element를 생성하는 방식 중 어떤 것이 더 나은 방식인지 생각해보게 되었습니다. 이에 대한 정답을 얻기 위해 구글링을 했고 `createElement()`를 통해 요소를 만드는 것이 더 효율적이며, 안전하다는 사실을 알게 되었습니다.

<br>
<br>

### 3. 상수의 분리

미션들을 진행하면서 하드코딩의 문제점에 대해 깨닫게 되었습니다. 하드코딩을 할 경우 코드의 의미를 이해하기 어렵고, 이는 유지보수의 어려움으로 이어집니다. 이를 피하기 위해 상수 파일을 따로 분리하여 상수를 `import`하는 방식을 사용하게 되었습니다.

<br>
<br>

### 4. 외부 접근과 내부 접근의 분리

핵심 변수를 변경시키는 함수를 외부에서 쉽게 접근할 수 있다면 버그가 생길 가능성이 높다는 문제가 있습니다. 자판기에 있는 상품들을 저장하는 `products`라는 프로퍼티가 있을 때, 이는 적절히 변경되어야 할 경우에만 조작되어야 합니다. 제가 참고한 코드 컨벤션에서 '외부에서 접근할 수 있지만, 사용되면 안되는 메서드명에 `_`를 추가'하라는 항목이 있었습니다.

```javascript
_productModelAddAction(product) {
  this.products.push(product); //products를 변경
}
```

이와 같이 메서드명에 `_`를 추가하면 이는 외부에서 접근하면 안되는 메서드임을 한번에 알 수 있습니다.

<br>
<br>

### 5. EOL

1주차 피드백을 읽을 때 EOL에 관한 항목이 전혀 이해가 되지 않았고 구글링을 해도 원하는 답을 찾을 수 없었습니다. 3주차 미션이 끝난 이 시점에서 저는 어느정도 답을 알 수 있었습니다. EOL은 End of Line의 약자로 말 그대로 문장의 끝을 의미합니다. 이는 운영체제마다 개행 문자가 다르며, 그렇기 때문에 피드백에 '환경에 따라 의도치 않게 개행 문자 처리가 되지 않도록'이라는 구절이 있는 것 입니다. 만약 운영체제에 맞지 않는 개행 문자를 쓰게 된다면 줄바꿈이 의도치 않게 될 수 있다는 것 입니다. 'eol 설정을 확인한다'라는 것은 아마 prettier와 같은 코드 포맷터의 설정을 확인하는 뜻인 것 같았습니다.

<br>
<br>

## 저의 성장

위에 작성한 배운 점은 핵심 부분만을 쓴 것입니다. 그만큼 프리코스를 진행하면서 많은 부분을 배우게 되었습니다. 코드에 정답은 없지만 나쁜 코드는 존재한다는 것을 알게 되었습니다. 한번 함수 라인 수를 15라인으로 제한하니, 다시는 함수가 여러 기능을 하도록 만들지 않을 것 같습니다. 미션을 진행하면서 제가 한번도 이렇게 꼼꼼하게 코딩하지는 않았던 것 같다는 생각이 들었습니다. 프리코스가 끝난 후에도 이번에 배운 많은 지식들을 잊지말고 꼭 적용해서 멋진 개발자가 되겠습니다.
